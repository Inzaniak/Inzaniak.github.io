<!doctype html><html><head><title>The 1shot LoRA Guide</title><base href="../"><meta id="root-path" root-path="../"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script type="module" src="lib/scripts/graph_view.js"></script><script src="lib/scripts/graph_wasm.js"></script><script src="lib/scripts/tinycolor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lib/scripts/webpage.js"></script><script src="lib/scripts/generated.js"></script></head><body class="theme-dark show-inline-title loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" style="tab-size:4"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:9341px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"></div><div><p><span alt="Pasted image 20231219095410.jpg" src="lib\media\pasted-image-20231219095410.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219095410.jpg" src="lib\media\pasted-image-20231219095410.jpg"></span></p></div><div><pre><code>&lt;lora:learn:0.6&gt;,sitting,zettai ryouiki,black hair,dress,short sleeves,breasts,asymmetrical wings,looking at viewer,:o,arm support,touhou,red eyes,snake,wings,blush,solo,short hair,red wings,black thighhighs
</code><button class="copy-code-button">Copy</button></pre></div><div class="heading-wrapper"><h1 data-heading="Introduction" class="heading" id="Introduction"><div class="heading-before"></div>Introduction<div class="heading-after">...</div></h1><div class="heading-children"><div><p>In this quick post, I'm going to share my worfkflow to create a LoRA with a single picture. If you've been following my work from the very start, you'll know that my first LoRAs were mainly traine on single pictures (see my 1-shot series on CivitAI).<br>The idea of this post is not to explain in detail each parameter available, but to give you a quick setup to train your own LoRAs.</p></div></div></div><div class="heading-wrapper"><h1 data-heading="Kohya GUI" class="heading" id="Kohya_GUI"><div class="heading-before"></div>Kohya GUI<div class="heading-after">...</div></h1><div class="heading-children"><div><p>The UI I'm going to use for the training is Kohya_ss, which is one of the most used at the moment.<br>I'm not going to do a step-by-step setup tutorial in this post (you can find a lot of tutorials about it just by searching on Bing), but you can learn more about how to install it here:<br><a data-tooltip-position="top" aria-label="https://github.com/bmaltais/kohya_ss?tab=readme-ov-file#installation" rel="noopener" class="external-link" href="https://github.com/bmaltais/kohya_ss?tab=readme-ov-file#installation" target="_blank">bmaltais/kohya_ss (github.com)</a><br>After you've installed the UI just launch it using the commands explained here:<br><a data-tooltip-position="top" aria-label="https://github.com/bmaltais/kohya_ss?tab=readme-ov-file#starting-gui-service" rel="noopener" class="external-link" href="https://github.com/bmaltais/kohya_ss?tab=readme-ov-file#starting-gui-service" target="_blank">bmaltais/kohya_ss (github.com)</a></p></div></div></div><div class="heading-wrapper"><h1 data-heading="Getting a training picture" class="heading" id="Getting_a_training_picture"><div class="heading-before"></div>Getting a training picture<div class="heading-after">...</div></h1><div class="heading-children"><div><p>The first step is (obviously) to get a picture to train the LoRA on. In my workflow I try to avoid training LoRAs on non-public domain content, so for this example I'm going to use Bing.com/create (but you can use what you prefer).<br>After we've opened the page, we can now use a prompt. In the below examples I've seen one that it seems interesting:<br><span alt="Pasted image 20231219100625.jpg" src="lib\media\pasted-image-20231219100625.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219100625.jpg" src="lib\media\pasted-image-20231219100625.jpg"></span><br>Let's change its prompt to fit what I want to create:</p></div><div><pre><code>woman portrait, sufganiot, byzantine Japanese woodblock scene, in viennese secession style, gilded, chromatic, whimsical, hanukkah
</code><button class="copy-code-button">Copy</button></pre></div><div><p>And here's the batch of pictures:<br><span alt="Pasted image 20231219100717.jpg" src="lib\media\pasted-image-20231219100717.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219100717.jpg" src="lib\media\pasted-image-20231219100717.jpg"></span><br>From this batch I'd like to train a LoRA based on the picture on the bottom right. Keep in mind that when training a LoRA on a single picture, it will be highly biased towards each characteristic of the picture (so in this case it will probably be biased towards candelabras and hair decorations).</p></div></div></div><div class="heading-wrapper"><h1 data-heading="Setting up the folder" class="heading" id="Setting_up_the_folder"><div class="heading-before"></div>Setting up the folder<div class="heading-after">...</div></h1><div class="heading-children"><div><p>To train the model you'll need to create a folder with a specific structure:</p></div><div><pre><code>| model-name
| -- img
| ---- pic-folders
| -- model
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">model-name: This can be anything you like. For this example I'm going to call it learn_final (because for some reason I've called all my project folders something_final)</li><li data-line="1">img: This is the folder where you'll put the pictures subfolders</li><li data-line="2">pic-folders: This can be one or more folders (in our simple case it will be just one). The name of this folder should be the number of the repetitions, underscore, a list of tags divided by commas. For this example I'm going to use 40 repetitions with just an "inzaniak" tag (so the folder will be 40_inzaniak). If I'm not training a specific concept I prefer to keep just the "inzaniak" tag without adding anything else. If you want, you can also add a .txt file in the same folder (keeping the same name of the picture), with a list of specific tags related to the picture.</li><li data-line="3">model: This is the folder, where the model will be saved<br>So in my case this is the actual folder structure:</li></ul></div><div><pre><code>\learn_final
├───img
│   └───40_inzaniak
│           OIG.jpg
│
├───log
└───model
</code><button class="copy-code-button">Copy</button></pre></div><div><p>Remember to copy the picture you've downloaded in the first step to the picture folder!</p></div></div></div><div class="heading-wrapper"><h1 data-heading="Setting up the UI" class="heading" id="Setting_up_the_UI"><div class="heading-before"></div>Setting up the UI<div class="heading-after">...</div></h1><div class="heading-children"><div><p>The first thing we need to do is to go to the LoRA tab:<br><span alt="Pasted image 20231219103018.jpg" src="lib\media\pasted-image-20231219103018.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219103018.jpg" src="lib\media\pasted-image-20231219103018.jpg"></span><br>Once you are in the tab we need to do the following:</p></div><div><ul><li data-line="0">Select the source model</li><li data-line="1">Select the folders we've created</li><li data-line="2">Choose the parameters for the training</li></ul></div><div><p>Bonus/Super patrons can find the pre-configured train file here: </p><a href="https://www.patreon.com/posts/1shot-lora-cfg-94927423">PATREON</a><p></p>If you use this config file, you'll only need to follow the first two points (and change the batch size based on your GPU VRAM).<br>To load the config file you can click on open in the "Configuration file" section (be sure to have the LoRA tab selected!):<br><span alt="Pasted image 20231219111131.jpg" src="lib\media\pasted-image-20231219111131.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219111131.jpg" src="lib\media\pasted-image-20231219111131.jpg"></span></p></div><div class="heading-wrapper"><h2 data-heading="Selecting the source model" class="heading" id="Selecting_the_source_model"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Selecting the source model<div class="heading-after">...</div></h2><div class="heading-children"><div><p><span alt="Pasted image 20231219110408.jpg" src="lib\media\pasted-image-20231219110408.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219110408.jpg" src="lib\media\pasted-image-20231219110408.jpg"></span><br>The first thing to do is to select the base model to use for the training. You usually have two choices:</p></div><div><ul><li data-line="0">Using the base SD model. This usually is the best way to make the LoRA compatible with every model, but you can lose some quality if you want to use it with a specific checkpoint.</li><li data-line="1">Using the checkpoint you are going to mainly use. This is what I do, I select my Mistoon_Anime_v2 model and use that as a base.<br>Once you've chosen the model you'll also have the possibility to specify if it is a v2 or SDXL model.</li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Select the folders" class="heading" id="Select_the_folders"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Select the folders<div class="heading-after">...</div></h2><div class="heading-children"><div><p><span alt="Pasted image 20231219110644.jpg" src="lib\media\pasted-image-20231219110644.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219110644.jpg" src="lib\media\pasted-image-20231219110644.jpg"></span><br>Go to the folders tab and insert into the "Image Folder" and "Output Folder" the related path. You'll also need to specify the name for the model.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Selecting the parameters" class="heading" id="Selecting_the_parameters"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Selecting the parameters<div class="heading-after">...</div></h2><div class="heading-children"><div><p>I'm not going into detail on what each parameter do (as it will take a lot of time and it's out-of-scope for this post), but here's what I'm using right now:<br><span alt="Pasted image 20231219110944.jpg" src="lib\media\pasted-image-20231219110944.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219110944.jpg" src="lib\media\pasted-image-20231219110944.jpg"></span><br><span alt="Pasted image 20231219110957.jpg" src="lib\media\pasted-image-20231219110957.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219110957.jpg" src="lib\media\pasted-image-20231219110957.jpg"></span><br><span alt="Pasted image 20231219111016.jpg" src="lib\media\pasted-image-20231219111016.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219111016.jpg" src="lib\media\pasted-image-20231219111016.jpg"></span><br><span alt="Pasted image 20231219111032.jpg" src="lib\media\pasted-image-20231219111032.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219111032.jpg" src="lib\media\pasted-image-20231219111032.jpg"></span></p></div><div><p>Keep in mind that I'm using Kohya_ss version: v22.3, so this list could change in the future.<br>Once you've setup the parameters as mine you can save them by going to the top of the page and clicking "Save as" in the "Configuration file" section:<br><span alt="Pasted image 20231219111131.jpg" src="lib\media\pasted-image-20231219111131.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219111131.jpg" src="lib\media\pasted-image-20231219111131.jpg"></span></p></div><div><p>Before running the training, you'll probably need to check the following:</p></div><div><ul><li data-line="0"><strong>Train Batch Size</strong>: this changes how many steps are done in parallel. This makes the training quicker, but also uses a lot of VRAM. I'm using a 16gb card and I'm able of doing a batch size of 8.</li><li data-line="1"><strong>Epoch</strong>: This is the number of epochs you are running the training for. I save the model each epoch, so I can choose the best version. Usually it takes at least 4 epochs to have something nice, while the further you go the more you'll get closer to have the same original picture.<br>Now you can run the training process. Depending on your hardware, epochs and batch size it could take a while (using my settings and a 4080 requires about 8/9 minutes)</li></ul></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Testing the LoRA" class="heading" id="Testing_the_LoRA"><div class="heading-before"></div>Testing the LoRA<div class="heading-after">...</div></h1><div class="heading-children"><div><p>Once you've finished training the LoRA, you should now see the trained models inside of the model folder. You can copy every .safetensors file and paste it in your LoRA folder.<br>Now you just need to run a prompt as you usually do and experiment with the different epochs.<br>Here's a bunch of pictures generated with Ranbooru with the 8 epochs version of the LoRA and a weight of 1.0:<br><span alt="Pasted image 20231219114541.jpg" src="lib\media\pasted-image-20231219114541.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231219114541.jpg" src="lib\media\pasted-image-20231219114541.jpg"></span></p></div></div></div><div class="heading-wrapper"><h1 data-heading="Support Me" class="heading" id="Support_Me"><div class="heading-before"></div>Support Me<div class="heading-after">...</div></h1><div class="heading-children"><div><p>I've started developing custom models for myself a few months ago just to check out how SD worked, but in the last few months it has become a new hobby I like to practice in my free time. All my checkpoints and LoRAs will always be released for free on Patreon or CivitAI, but if you want to support my work and get early access to all my models feel free to check out my Patreon:<br><a rel="noopener" class="external-link" href="https://www.patreon.com/Inzaniak" target="_blank">https://www.patreon.com/Inzaniak</a></p></div><div><p>If you want to support my work for&nbsp;<strong>free</strong>, you can also check out my music/art here:</p></div><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://inzaniak.bandcamp.com/" rel="noopener" class="external-link" href="https://inzaniak.bandcamp.com/" target="_blank">Bandcamp</a></li><li data-line="1"><a data-tooltip-position="top" aria-label="https://www.deviantart.com/inzaniak" rel="noopener" class="external-link" href="https://www.deviantart.com/inzaniak" target="_blank">DeviantArt</a></li></ul></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder"><div class="graph-view-container"><div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div><canvas id="graph-canvas" width="512px" height="512px"></canvas></div></div></div><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction"><span class="tree-item-title"><p>Introduction</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Kohya_GUI"><span class="tree-item-title"><p>Kohya GUI</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Getting_a_training_picture"><span class="tree-item-title"><p>Getting a training picture</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Setting_up_the_folder"><span class="tree-item-title"><p>Setting up the folder</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Setting_up_the_UI"><span class="tree-item-title"><p>Setting up the UI</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Selecting_the_source_model"><span class="tree-item-title"><p>Selecting the source model</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Select_the_folders"><span class="tree-item-title"><p>Select the folders</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Selecting_the_parameters"><span class="tree-item-title"><p>Selecting the parameters</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Testing_the_LoRA"><span class="tree-item-title"><p>Testing the LoRA</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Support_Me"><span class="tree-item-title"><p>Support Me</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></body></html>