<!doctype html><html><head><title>The Ranbooru Comprehensive Guide</title><base href="./"><meta id="root-path" root-path="./"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script type="module" src="lib/scripts/graph_view.js"></script><script src="lib/scripts/graph_wasm.js"></script><script src="lib/scripts/tinycolor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lib/scripts/webpage.js"></script><script src="lib/scripts/generated.js"></script></head><body class="theme-dark show-inline-title loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" style="tab-size:4"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:31331px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"></div><div class="heading-wrapper"><h1 data-heading="Introduction" class="heading" id="Introduction"><div class="heading-before"></div>Introduction<div class="heading-after">...</div></h1><div class="heading-children"><div><p>Ranbooru is an extension for the&nbsp;<a data-tooltip-position="top" aria-label="https://github.com/AUTOMATIC1111/stable-diffusion-webui" rel="noopener" class="external-link" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" target="_blank">automatic111 Stable Diffusion UI</a>. The purpose of this extension is to add a panel that gets a random set of tags from boorus pictures. This can be useful when testing a new model or to try multiple concepts without the need of writing different prompts manually. The extension evolved a lot since it's origin, so I decided to write a tutorial to explain everything you can do with it!</p></div><div><hr></div></div></div><div class="heading-wrapper"><h1 data-heading="Installation" class="heading" id="Installation"><div class="heading-before"></div>Installation<div class="heading-after">...</div></h1><div class="heading-children"><div><p>To install the extension just open the Automatic1111 UI and follow these instructions:<br><span alt="Pasted image 20231212145923.jpg" src="compressed\pasted-image-20231212145923.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212145923.jpg" src="compressed\pasted-image-20231212145923.jpg"></span></p></div><div><ol><li data-line="0">Select the Extensions tab</li><li data-line="1">Click on Load From and wait for the list to load</li><li data-line="2">Find ranbooru (you can use the filter) and click on Install</li><li data-line="3">Wait for the installation to complete</li><li data-line="4">Restart the UI (I recommend to close the terminal and run it again)</li></ol></div><div><hr></div></div></div><div class="heading-wrapper"><h1 data-heading="Components Deep Dive" class="heading" id="Components_Deep_Dive"><div class="heading-before"></div>Components Deep Dive<div class="heading-after">...</div></h1><div class="heading-children"><div><p>In the following subparagraphs we are going to take a look at every component available in the extension. If you just want to learn about the general usage, feel free to skip ahead.</p></div><div class="heading-wrapper"><h3 data-heading="General" class="heading" id="General"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>General<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span alt="Pasted image 20231212151244.jpg" src="compressed\pasted-image-20231212151244.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212151244.jpg" src="compressed\pasted-image-20231212151244.jpg"></span></p></div><div><ul><li data-line="0"><strong>Enabled</strong>: Enables the Ranbooru part of the extension</li><li data-line="1"><strong>Booru</strong>: The booru to get the tags from. Right now Gelbooru, Rule34, Safebooru, yande.re, konachan, aibooru, danbooru and xbooru are implemented. You can easily add more creating a class for the booru and adding it to the booru list in the script.</li><li data-line="2"><strong>Max Pages</strong>: The maximum amount of pages to get the tags from. The extension will get a random page from the booru and then get the tags from one or more random pictures from that page.</li><li data-line="3"><strong>Post ID</strong>: Here you can specify the ID of the post to get the tags from. If you leave it blank, the extension will get a random post (or more than one) from the random page.</li><li data-line="4"><strong>Tags to Search (Pre)</strong>: This add the tags you define (this should be separated by commas e.g: 1girl,solo,short_hair) to the search query. This is useful if you want to get tags from a specific category, like "1girl" or "solo".</li><li data-line="5"><strong>Tags to Remove (Post)</strong>: This remove the tags you define (this should be separated by commas e.g: 1girl,solo,short_hair) from the result query. This is useful if you want to remove tags that are too generic, like "1girl" or "solo". You can also use <em>with any tag to remove every tags which contains the related word. e.g: </em>hair will remove every tag that contains the word "hair".</li><li data-line="6"><strong>Mature Rating</strong>: This sets the mature rating of the booru. This is useful if you want to get only SFW or NSFW tags. It only works on supported boorus (right now it has been tested only on Gelbooru).</li><li data-line="7"><strong>Remove Bad Tags</strong>: This remove tags that you usually don't need (watermarks,text,censor)</li><li data-line="8"><strong>Shuffle Tags</strong>: This shuffle the tags before adding them to the text.</li><li data-line="9"><strong>Convert</strong>&nbsp;"<em>" to Spaces": This convert </em>to spaces in the tags.</li><li data-line="10"><strong>Use the same prompt for all images</strong>: This use the same prompt for all the generated images in the same batch. If not selected, each image will have a different prompt.</li><li data-line="11"><strong>Limit Tags</strong>: This limits the number of tags to use in percentage of the original tags. For example, if you set it to 50, it will use only half of the tags.</li><li data-line="12"><strong>Max Tags</strong>: This limits the number of tags to use.</li><li data-line="13"><strong>Change Background</strong>: This tries to change the background of the parsed tags by adding or removing specific tags</li><li data-line="14"><strong>Change Color</strong>: This tries to change the color of the parsed tags by adding or removing specific tags</li><li data-line="15"><strong>Sorting Order</strong>: This orders the result of the scraped pictures by high or low score and make it more or less likely to get a high or low score picture. This is applied AFTER the results are scraped, because you cannot use the API to search for high ranking pictures.</li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="Img2img" class="heading" id="Img2img"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Img2img<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span alt="Pasted image 20231212151023.jpg" src="compressed\pasted-image-20231212151023.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212151023.jpg" src="compressed\pasted-image-20231212151023.jpg"></span></p></div><div><ul><li data-line="0"><strong>Use img2img</strong>: This uses not only the tags from the random image, but also the original picture to generate the final result.</li><li data-line="1"><strong>Send to controlnet</strong>: This sends the first image of the batch to the controlnet. (Requires a dummy image selected inside the controlnet panel)</li><li data-line="2"><strong>Denoising Strength</strong>: This is the strength of the denoising filter. The higher the value, the more the picture will change from the original.</li><li data-line="3"><strong>Use last image as img2img</strong>&nbsp;This uses the same picture for all the img2img generations in the same batch.</li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="File" class="heading" id="File"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span alt="Pasted image 20231212151034.jpg" src="compressed\pasted-image-20231212151034.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212151034.jpg" src="compressed\pasted-image-20231212151034.jpg"></span></p></div><div><ul><li data-line="0"><strong>Use tags_search.txt</strong>: This uses the tags from the specified file in the scripts folder. This is useful if you want to use a specific set of tags.</li><li data-line="1"><strong>Choose tags_search.txt</strong>: This is the file to use with the tags_search.txt option. You can add new files in the stable-diffusion-webui\scripts\ranbooru folder.</li><li data-line="2"><strong>Use tags_remove.txt</strong>: This removes the tags from the specified file in the scripts folder. This is useful if you want to remove a specific set of tags.</li><li data-line="3"><strong>Choose tags_remove.txt</strong>: This is the file to use with the tags_remove.txt option. You can add new files in the stable-diffusion-webui\scripts\ranbooru folder.</li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="Extra" class="heading" id="Extra"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Extra<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span alt="Pasted image 20231212151047.jpg" src="compressed\pasted-image-20231212151047.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212151047.jpg" src="compressed\pasted-image-20231212151047.jpg"></span></p></div><div><ul><li data-line="0"><strong>Mix Prompts</strong>: This mixes tags from different random images.</li><li data-line="1"><strong>Mix Amount</strong>: This sets the number of pictures to grab random tags from.</li><li data-line="2"><strong>Chaos Mode</strong>: This mixes the tags between the positive and negative prompt. If set to Less Chaos, it won't move the tags you insert in the negative prompt.</li><li data-line="3"><strong>Chaos Amount</strong>: This sets the percentage of tags to move to the negative prompt.</li><li data-line="4"><strong>Negative Mode</strong>: This moves all the tags to the negative prompt.</li></ul></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Getting Started" class="heading" id="Getting_Started"><div class="heading-before"></div>Getting Started<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Basic Usage" class="heading" id="Basic_Usage"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Basic Usage<div class="heading-after">...</div></h2><div class="heading-children"><div><p>The most basic usage of Ranbooru can be summarized as follow:</p></div><div><ul><li data-line="0">Enable the extension</li><li data-line="1">Select a Booru from the dropdown</li><li data-line="2">Run the prompt<br>This will search the first 1,000 results from the booru you've selected and pick 1 or more prompts (based on the Batch size and count) at random from the parsed results.</li></ul></div><div class="heading-wrapper"><h5 data-heading="Example" class="heading" id="Example"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Example<div class="heading-after">...</div></h5><div class="heading-children"><div><p><span alt="Pasted image 20231212153648.jpg" src="compressed\pasted-image-20231212153648.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212153648.jpg" src="compressed\pasted-image-20231212153648.jpg"></span><br>And here's some results:<br><span alt="Pasted image 20231212153758.jpg" src="compressed\pasted-image-20231212153758.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212153758.jpg" src="compressed\pasted-image-20231212153758.jpg"></span></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Using a specific ID" class="heading" id="Using_a_specific_ID"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Using a specific ID<div class="heading-after">...</div></h2><div class="heading-children"><div><p>To use a specific ID you just need to browse the booru you are using, choose an ID and insert it inside of the "Post ID" field:<br><span alt="Pasted image 20231212164205.jpg" src="compressed\pasted-image-20231212164205.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212164205.jpg" src="compressed\pasted-image-20231212164205.jpg"></span><br>This will work for everything:</p></div><div><ul><li data-line="0">txt2img</li><li data-line="1">img2img (explained below)</li><li data-line="2">Send to Controlnet (explained below)<br>Here's the result:<br><span alt="Pasted image 20231212164246.jpg" src="compressed\pasted-image-20231212164246.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212164246.jpg" src="compressed\pasted-image-20231212164246.jpg"></span></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Let's Search for Something" class="heading" id="Let's_Search_for_Something"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Let's Search for Something<div class="heading-after">...</div></h2><div class="heading-children"><div><p>What if we want to search for some specific tags? Let's say that we want to search for a specific tag, we just need to add this in the "Tags to search (pre)" box, for example I'm going to search for <em>saigyouji_yuyuko</em>:<br><span alt="Pasted image 20231212154817.jpg" src="compressed\pasted-image-20231212154817.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212154817.jpg" src="compressed\pasted-image-20231212154817.jpg"></span><br>The syntax for writing tags inside of this box is the same of the one used on boorus with the only difference that <strong>you need to separate the tags using a comma (,) and not a space</strong>.<br>Running the query will get something like this:<br><span alt="Pasted image 20231212154948.jpg" src="compressed\pasted-image-20231212154948.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212154948.jpg" src="compressed\pasted-image-20231212154948.jpg"></span></p></div><div><p>This looks nice, but I want to be sure that only one character is represented inside of the picture. Let's add <em>solo</em> to the prompt:<br><span alt="Pasted image 20231212155119.jpg" src="compressed\pasted-image-20231212155119.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155119.jpg" src="compressed\pasted-image-20231212155119.jpg"></span><br>Now if I run the prompt again I should get only the character I want:<br><span alt="Pasted image 20231212155159.jpg" src="compressed\pasted-image-20231212155159.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155159.jpg" src="compressed\pasted-image-20231212155159.jpg"></span></p></div><div><p>Let's try adding some negative terms to the query. For example, I want to exclude all the pictures that have a <em>simple_background</em>:<br><span alt="Pasted image 20231212155516.jpg" src="compressed\pasted-image-20231212155516.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155516.jpg" src="compressed\pasted-image-20231212155516.jpg"></span><br>Keep in mind that this will filter the search results, so you'll get less results from the booru! Here's a sample:<br><span alt="Pasted image 20231212155611.jpg" src="compressed\pasted-image-20231212155611.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155611.jpg" src="compressed\pasted-image-20231212155611.jpg"></span></p></div><div><p>Let's finetune again the prompt. I want to remove the hat from the results, so let's add hat to the "Tags to Remove (Post)" section:<br><span alt="Pasted image 20231212155639.jpg" src="compressed\pasted-image-20231212155639.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155639.jpg" src="compressed\pasted-image-20231212155639.jpg"></span><br>By doing this we will get:<br><span alt="Pasted image 20231212155354.jpg" src="compressed\pasted-image-20231212155354.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155354.jpg" src="compressed\pasted-image-20231212155354.jpg"></span><br>As you can see only one picture out of 4 does not contain the hat. This is because there are other tags which are related to the hat. We can use the asterisk to remove everything that contains a specific keyword. Let's try this prompt:<br><span alt="Pasted image 20231212155852.jpg" src="compressed\pasted-image-20231212155852.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155852.jpg" src="compressed\pasted-image-20231212155852.jpg"></span><br>This will remove all the tags containing: hat, head and cap. Here's the result:<br><span alt="Pasted image 20231212155922.jpg" src="compressed\pasted-image-20231212155922.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212155922.jpg" src="compressed\pasted-image-20231212155922.jpg"></span></p></div><div><p>Finally, for this prompt, I'd like to change the hair color to black. To do this, we can add the <em>*pink</em> tag to the tags to remove and then add <em>black hair</em> in the UI prompt:<br><span alt="Pasted image 20231212160206.jpg" src="compressed\pasted-image-20231212160206.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212160206.jpg" src="compressed\pasted-image-20231212160206.jpg"></span><br><span alt="Pasted image 20231212160217.jpg" src="compressed\pasted-image-20231212160217.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212160217.jpg" src="compressed\pasted-image-20231212160217.jpg"></span><br>And these are the final results:<br><span alt="Pasted image 20231212160227.jpg" src="compressed\pasted-image-20231212160227.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212160227.jpg" src="compressed\pasted-image-20231212160227.jpg"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="Mature Ratings" class="heading" id="Mature_Ratings"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Mature Ratings<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Another thing that we can change while searching is adding a Mature Rating. For example if you run a standard search without changing the rating, you'll get a mixture of SFW/NSFW pictures:<br><span alt="Pasted image 20231212160449.jpg" src="compressed\pasted-image-20231212160449.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212160449.jpg" src="compressed\pasted-image-20231212160449.jpg"></span><br>If you want to filter out NSFW pictures (or you want just those), you just need to set the "Mature Rating" radio box:<br><span alt="Pasted image 20231212160548.jpg" src="compressed\pasted-image-20231212160548.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212160548.jpg" src="compressed\pasted-image-20231212160548.jpg"></span><br>By doing this, you'll search the Booru for only the specified ratings. Keep in mind that NSFW pictures could still be generated depending by the model used.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Keeping the prompt clean" class="heading" id="Keeping_the_prompt_clean"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Keeping the prompt clean<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Ranbooru has a tag filter already implemented enabled by default (the "Remove Bad Tags" checkbox). This removes most of the text and censor related tags from the final prompt (these are not filtered from the actual Booru search, but only removed before running the prompt). You can still add more tags to filter in two different ways:</p></div><div><ul><li data-line="0">Using the "Tags to Remove (Post)" as explained before</li><li data-line="1">Adding the tags in a file inside of the following path: /stable-diffusion-webui/scripts/ranbooru/remove<br>Here's an example of the second option:<br><span alt="Pasted image 20231212161139.jpg" src="compressed\pasted-image-20231212161139.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161139.jpg" src="compressed\pasted-image-20231212161139.jpg"></span><br>And here's the content of the file:<br><span alt="Pasted image 20231212161159.jpg" src="compressed\pasted-image-20231212161159.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161159.jpg" src="compressed\pasted-image-20231212161159.jpg"></span><br>Once you've created the file, you can select the one you want to use by going in the "File" panel of the extension, choose "Use tags_remove.txt" and select the file you've just created (you'll need to restart the UI if the file is new. This is not needed if the file has been updated)<br><span alt="Pasted image 20231212161248.jpg" src="compressed\pasted-image-20231212161248.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161248.jpg" src="compressed\pasted-image-20231212161248.jpg"></span><br>You can also do the same thing for the search terms by adding a file in the search folder.</li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Generate multiple pictures with a single prompt" class="heading" id="Generate_multiple_pictures_with_a_single_prompt"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Generate multiple pictures with a single prompt<div class="heading-after">...</div></h2><div class="heading-children"><div><p>If you want to generate multiple variants using a single prompt instead of multiple ones, you can flag this option:<br><span alt="Pasted image 20231212161603.jpg" src="compressed\pasted-image-20231212161603.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161603.jpg" src="compressed\pasted-image-20231212161603.jpg"></span><br>When flagged, all the pictures created in the same execution (both for Batch count/size) will use a single prompt, for example:<br><span alt="Pasted image 20231212161701.jpg" src="compressed\pasted-image-20231212161701.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161701.jpg" src="compressed\pasted-image-20231212161701.jpg"></span><br>You can see that all the pictures have similar compositions because they are sharing the same prompt.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Tags Limiting" class="heading" id="Tags_Limiting"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Tags Limiting<div class="heading-after">...</div></h2><div class="heading-children"><div><p>By default Ranbooru accepts 100 different tags as shown by these two sliders:<br><span alt="Pasted image 20231212161855.jpg" src="compressed\pasted-image-20231212161855.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212161855.jpg" src="compressed\pasted-image-20231212161855.jpg"></span><br>In some cases you'll want to have less tags, as it can help to generate cleaner and more coherent pictures. You have two choices:</p></div><div><ul><li data-line="0">Limit tags: This will remove random tags from the prompt based on a percentage value. For example, if you choose 0.5 as a value, this will remove half of the tags available in the prompt</li><li data-line="1">Max tags: This will remove random tags based on a threshold. For example if the parsed prompt has 23 tags and you choose 20, this will remove 3 tags at random.<br>This feature can also lead to generating variations for a single prompt. For example if I limit the tags to 10 and select "Use same prompt for all images" I'll get something like these:<br><span alt="Pasted image 20231212162224.jpg" src="compressed\pasted-image-20231212162224.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212162224.jpg" src="compressed\pasted-image-20231212162224.jpg"></span><br>As you can see these pictures are different even if they share the same prompt. This is due to the fact that for each picture different tags have been removed.</li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Changing Color/BG" class="heading" id="Changing_Color/BG"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Changing Color/BG<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Another useful feature available is the possibility to change the color or background of a picture without having to write tags:<br><span alt="Pasted image 20231212162401.jpg" src="compressed\pasted-image-20231212162401.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212162401.jpg" src="compressed\pasted-image-20231212162401.jpg"></span><br>For example if I select:</p></div><div><ul><li data-line="0">Remove Background</li><li data-line="1">Limited Palette<br>I'll get results similar to these:<br><span alt="Pasted image 20231212162505.jpg" src="compressed\pasted-image-20231212162505.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212162505.jpg" src="compressed\pasted-image-20231212162505.jpg"></span><br>This option can help searching for specific tags without having to worry about coloring and background tags.</li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Running img2img" class="heading" id="Running_img2img"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Running img2img<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Other than using the prompt, you can also use the picture you parse from the booru to run an img2img over it. To do this you just need to go to the img2img tab, enable it, and choose the denoising strength:<br><span alt="Pasted image 20231212162803.jpg" src="compressed\pasted-image-20231212162803.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212162803.jpg" src="compressed\pasted-image-20231212162803.jpg"></span><br>Keep in mind that when using a batch size greater than 1, the actual ratio of the picture (squared,vertical,horizontal) will be based on the last picture parsed (as far as I know is not possible to do different sizes inside of the same batch). Here's an example using the settings above:<br><span alt="Pasted image 20231212163003.jpg" src="compressed\pasted-image-20231212163003.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163003.jpg" src="compressed\pasted-image-20231212163003.jpg"></span></p></div><div><p>If you want you can also use only the last image to run the img2img, by flagging the "Use last image as img2img" flag. This will help keep consistency in the ratio:<br><span alt="Pasted image 20231212163232.jpg" src="compressed\pasted-image-20231212163232.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163232.jpg" src="compressed\pasted-image-20231212163232.jpg"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="Send to Controlnet" class="heading" id="Send_to_Controlnet"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Send to Controlnet<div class="heading-after">...</div></h2><div class="heading-children"><div><p>You can also use the img2img tab to send the picture to the controlnet instead of passing it to the img2img processor. When flagged, the denoising strength bar will work as a controlnet amount slider:<br><span alt="Pasted image 20231212163408.jpg" src="compressed\pasted-image-20231212163408.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163408.jpg" src="compressed\pasted-image-20231212163408.jpg"></span><br>In this case I'm passing the picture to the controlnet with an amount of 0,5.<br>You'll also need to specify a controlnet to use and also pass a dummy image (because right now I've not found a way to make the code work without it).<br>Se for example let's use an IP-Adapter:<br><span alt="Pasted image 20231212163614.jpg" src="compressed\pasted-image-20231212163614.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163614.jpg" src="compressed\pasted-image-20231212163614.jpg"></span><br>You don't need to enable the controlnet, as it will be automatically done by the ranbooru extension. We just need to add a dummy picture and then we can run the prompt:<br><span alt="Pasted image 20231212163713.jpg" src="compressed\pasted-image-20231212163713.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163713.jpg" src="compressed\pasted-image-20231212163713.jpg"></span><br>In my case I got this result:<br><span alt="Pasted image 20231212163948.jpg" src="compressed\pasted-image-20231212163948.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212163948.jpg" src="compressed\pasted-image-20231212163948.jpg"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="Mixing it up!" class="heading" id="Mixing_it_up!"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Mixing it up!<div class="heading-after">...</div></h2><div class="heading-children"><div><p>If you open the extra tab of the extension, you'll find some experimental tools:<br><span alt="Pasted image 20231212165013.jpg" src="compressed\pasted-image-20231212165013.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212165013.jpg" src="compressed\pasted-image-20231212165013.jpg"></span><br>This can be useful to create some variations when searching for a prompt with few results, or if you just want to mix things up.<br>By enabling the "Mix prompts" option, the final prompt used for a picture will be a mixture of different tags taken from multiple results. keep in mind that in this case the tags limit is applied before the mixing.<br>For example if I search for <em>touhou</em> characters and I mix 4 posts I can get variations of those characters:<br><span alt="Pasted image 20231212165301.jpg" src="compressed\pasted-image-20231212165301.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212165301.jpg" src="compressed\pasted-image-20231212165301.jpg"></span></p></div><div><p>Another interesting feature is the "Chaos Mode". This mixes the tags between the positive and negative prompt. If set to Less Chaos, it won't move the tags from your custom prompt in the negative prompt. This can lead to unexpected results like this one:<br><span alt="Pasted image 20231212165845.jpg" src="compressed\pasted-image-20231212165845.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212165845.jpg" src="compressed\pasted-image-20231212165845.jpg"></span></p></div><div><p>The final experimental option is: "Negative Mode". This when enabled, moves all the tags from the prompt into the negative prompt. This usually creates weird pictures:<br><span alt="Pasted image 20231212170032.jpg" src="compressed\pasted-image-20231212170032.jpg" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231212170032.jpg" src="compressed\pasted-image-20231212170032.jpg"></span></p></div><div><hr></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Want new features added?" class="heading" id="Want_new_features_added?"><div class="heading-before"></div>Want new features added?<div class="heading-after">...</div></h1><div class="heading-children"><div><p>If you have an idea for a new feature to be added, or you want your favorite booru enabled inside of ranbooru, you can open an issue on the Github repository:<br><a data-tooltip-position="top" aria-label="https://github.com/Inzaniak/sd-webui-ranbooru" rel="noopener" class="external-link" href="https://github.com/Inzaniak/sd-webui-ranbooru" target="_blank">Inzaniak/sd-webui-ranbooru (github.com)</a><br>If you have any issue with the extension you can also write there asking for support!</p></div><div><hr></div></div></div><div class="heading-wrapper"><h1 data-heading="Support Me" class="heading" id="Support_Me"><div class="heading-before"></div>Support Me<div class="heading-after">...</div></h1><div class="heading-children"><div><p>I've started developing custom models for myself a few months ago just to check out how SD worked, but in the last few months it has become a new hobby I like to practice in my free time. All my checkpoints and LoRAs will always be released for free on Patreon or CivitAI, but if you want to support my work and get early access to all my models feel free to check out my Patreon:<br><a rel="noopener" class="external-link" href="https://www.patreon.com/Inzaniak" target="_blank">https://www.patreon.com/Inzaniak</a></p></div><div><p>If you want to support my work for&nbsp;<strong>free</strong>, you can also check out my music/art here:</p></div><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://inzaniak.bandcamp.com/" rel="noopener" class="external-link" href="https://inzaniak.bandcamp.com/" target="_blank">Bandcamp</a></li><li data-line="1"><a data-tooltip-position="top" aria-label="https://www.deviantart.com/inzaniak" rel="noopener" class="external-link" href="https://www.deviantart.com/inzaniak" target="_blank">DeviantArt</a></li></ul></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder"><div class="graph-view-container"><div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div><canvas id="graph-canvas" width="512px" height="512px"></canvas></div></div></div><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction"><span class="tree-item-title"><p>Introduction</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Installation"><span class="tree-item-title"><p>Installation</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Components_Deep_Dive"><span class="tree-item-title"><p>Components Deep Dive</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#General"><span class="tree-item-title"><p>General</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Img2img"><span class="tree-item-title"><p>Img2img</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File"><span class="tree-item-title"><p>File</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Extra"><span class="tree-item-title"><p>Extra</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Getting_Started"><span class="tree-item-title"><p>Getting Started</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Basic_Usage"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Basic Usage</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Example"><span class="tree-item-title"><p>Example</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Using_a_specific_ID"><span class="tree-item-title"><p>Using a specific ID</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Let's_Search_for_Something"><span class="tree-item-title"><p>Let's Search for Something</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Mature_Ratings"><span class="tree-item-title"><p>Mature Ratings</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Keeping_the_prompt_clean"><span class="tree-item-title"><p>Keeping the prompt clean</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Generate_multiple_pictures_with_a_single_prompt"><span class="tree-item-title"><p>Generate multiple pictures with a single prompt</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Tags_Limiting"><span class="tree-item-title"><p>Tags Limiting</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Changing_Color/BG"><span class="tree-item-title"><p>Changing Color/BG</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Running_img2img"><span class="tree-item-title"><p>Running img2img</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Send_to_Controlnet"><span class="tree-item-title"><p>Send to Controlnet</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Mixing_it_up!"><span class="tree-item-title"><p>Mixing it up!</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Want_new_features_added?"><span class="tree-item-title"><p>Want new features added?</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Support_Me"><span class="tree-item-title"><p>Support Me</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></body></html>